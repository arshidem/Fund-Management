function o(e){const n="=".repeat((4-e.length%4)%4),a=(e+n).replace(/\-/g,"+").replace(/_/g,"/"),t=window.atob(a),r=new Uint8Array(t.length);for(let i=0;i<t.length;++i)r[i]=t.charCodeAt(i);return r}async function s(e,n){if(!("serviceWorker"in navigator)||!("PushManager"in window))return;const a=await navigator.serviceWorker.register("/service-worker.js");if(await Notification.requestPermission()!=="granted")return;const r=await a.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:o({}.REACT_APP_VAPID_PUBLIC_KEY)});return await fetch("/api/notifications/save-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscription:r,userId:e,role:n})}),r}export{s as registerForPush,o as urlBase64ToUint8Array};
